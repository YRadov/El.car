var app=angular.module("lesModule",[]);app.controller("LesCtrl",function(a){a.diam="",a.qty=1,a.DiamQty={6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,16:0,18:0,20:0,22:0,24:0,26:0,28:0,30:0,32:0,34:0,36:0,38:0},a.addDiam=function(r){a.diam=r},a.removeDiam=function(){a.diam="",a.qty=1},a.plusDiam=function(){a.qty++},a.minusDiam=function(){a.qty>1&&a.qty--},a.addNext=function(){if(a.diam){var r=parseInt($("#diam"+a.diam).val()),t=r+a.qty;$("#diam"+a.diam).val(t),current_elem=$("#diam"+a.diam),Calculation(),a.DiamQty[a.diam]+=a.qty;var n=a.countTotalSum();$("#qty_by_diams").text("Колличество бревен ("+n+" шт)"),a.removeDiam()}else errorMessages("Введите данные")},a.show_flag=!0,a.showQtyByDiam=function(){if(a.show_flag){var r="",t=0;for(var n in a.DiamQty)t+=a.DiamQty[n],r+='<tr class="additional-data"><td><i class="fa fa-ban"></i>&nbsp;'+n+"</td><td>"+a.DiamQty[n]+" шт</td></tr>";$(".keyboard").append('<table class="table-responsive table-striped table-bordered additional-diam-data">'+r+"</table>"),a.show_flag=!1}else $(".additional-diam-data").remove(),a.show_flag=!0;var t=0;for(var n in a.DiamQty)t+=a.DiamQty[n]},a.countTotalSum=function(){var r=0;for(var t in a.DiamQty)r+=a.DiamQty[t];return r},a.cleanDiamQty=function(){for(var r in a.DiamQty)a.DiamQty[r]=0},a.CarsLoadings=[],a.new_car_num="",a.new_car_date="",a.addNewCar=function(){if(a.new_car_num){var r={num:a.new_car_num,date:a.new_car_date,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,16:0,18:0,20:0,22:0,24:0,26:0,28:0,30:0,32:0,34:0,36:0,38:0};a.CarsLoadings.push(r),a.current_car=r,a.new_car_num="",a.new_car_date="",localStorage.setItem("CarsLoadings",JSON.stringify(a.CarsLoadings))}else errorMessages("Введите номер машины")},a.saveDataInAllLoading=function(){console.log("добавление данных в текущую машину",a.current_car);for(var r=0,t=0,n=6;39>n;n++)14>n?(r=a.current_car[n],t=parseInt($("#diam"+n).val())+r,a.current_car[n]=t):n%2==0&&(r=a.current_car[n],t=parseInt($("#diam"+n).val())+r,a.current_car[n]=t);console.log("текущая машина после изменения",a.current_car)},a.show_cars=!1,a.showCarsLoadings=function(){a.show_cars?(a.show_cars=!1,$("#all_cars").text("Показать загрузку по машинам")):(a.show_cars=!0,$("#all_cars").text("Убрать загрузку по машинам"))}});